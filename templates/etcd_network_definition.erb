{
    "Network": "<%= scope['flannel::network'] %>"<% -%>
<% if scope['flannel::subnetlen'] then -%>,
    "SubnetLen": <%= scope['flannel::subnetlen'] -%>
<% end -%>
<% if scope['flannel::subnetmin'] then -%>,
    "SubnetMin": "<%= scope['flannel::subnetmin'] %>"<% -%>
<% end -%>
<% if scope['flannel::subnetmax'] then -%>,
    "SubnetMax": "<%= scope['flannel::subnetmax'] %>"<% -%>
<% end -%>
<% if scope['flannel::backend_type'] && scope['flannel::backend_port'] then -%>,
    "Backend": {
        "Type": "<%= scope['flannel::backend_type'] %>"<% -%>
<% if scope['flannel::backend_type'] == 'udp' then -%>,
        "Port": <%= scope['flannel::backend_port'] -%>
<% elsif scope['flannel::backend_type'] == 'vxlan' -%>,
        "VNI": <%= scope['flannel::backend_port'] -%>
<% elsif scope['flannel::backend_type'] == 'aws-vpc' -%>,
        "RouteTableID": <%= scope['flannel::backend_port'] -%>
<% end -%>
    }
<% end -%>
}
